#!/usr/bin/expect -f
set timeout -1
log_file tests.log
spawn vtysh
expect "*#"
send -- "configure terminal\r"
expect "*#"
send -- "no ! Zebra configuration saved from vty\r"
expect "*#"
send -- "! Zebra configuration saved from vty\r"
expect "*#"
send -- "no !   2021/03/30 10:48:13\r"
expect "*#"
send -- "!   2021/03/30 10:48:13\r"
expect "*#"
send -- "no frr version 7.7-dev_git\r"
expect "*#"
send -- "frr version 7.7-dev_git\r"
expect "*#"
send -- "no frr defaults traditional\r"
expect "*#"
send -- "frr defaults traditional\r"
expect "*#"
send -- "no hostname r2\r"
expect "*#"
send -- "hostname r2\r"
expect "*#"
send -- "no log file //bgpd.log\r"
expect "*#"
send -- "log file //bgpd.log\r"
expect "*#"
send -- "router bgp 65000\r"
expect "*#"
send -- "no bgp router-id 192.168.0.2\r"
expect "*#"
send -- "bgp router-id 192.168.0.2\r"
expect "*#"
send -- "no bgp log-neighbor-changes\r"
expect "*#"
send -- "bgp log-neighbor-changes\r"
expect "*#"
send -- "bgp ebgp-requires-policy\r"
expect "*#"
send -- "no bgp ebgp-requires-policy\r"
expect "*#"
send -- "no coalesce-time 0\r"
expect "*#"
send -- "coalesce-time 0\r"
expect "*#"
send -- "no timers bgp 3 10\r"
expect "*#"
send -- "timers bgp 3 10\r"
expect "*#"
send -- "no neighbor 192.168.0.1 remote-as 65000\r"
expect "*#"
send -- "neighbor 192.168.0.1 remote-as 65000\r"
expect "*#"
send -- "no neighbor 192.168.0.1 description Router R1 (iBGP)\r"
expect "*#"
send -- "neighbor 192.168.0.1 description Router R1 (iBGP)\r"
expect "*#"
send -- "no neighbor 192.168.0.1 update-source lo\r"
expect "*#"
send -- "neighbor 192.168.0.1 update-source lo\r"
expect "*#"
send -- "no neighbor 192.168.0.1 timers 3 10\r"
expect "*#"
send -- "neighbor 192.168.0.1 timers 3 10\r"
expect "*#"
send -- "no neighbor 192.168.0.1 timers connect 5\r"
expect "*#"
send -- "neighbor 192.168.0.1 timers connect 5\r"
expect "*#"
send -- "no neighbor 192.168.201.2 remote-as 65200\r"
expect "*#"
send -- "neighbor 192.168.201.2 remote-as 65200\r"
expect "*#"
send -- "no neighbor 192.168.201.2 description Router R5 (eBGP AS 65200)\r"
expect "*#"
send -- "neighbor 192.168.201.2 description Router R5 (eBGP AS 65200)\r"
expect "*#"
send -- "no neighbor 192.168.201.2 timers 3 10\r"
expect "*#"
send -- "neighbor 192.168.201.2 timers 3 10\r"
expect "*#"
send -- "no neighbor 192.168.201.2 timers connect 5\r"
expect "*#"
send -- "neighbor 192.168.201.2 timers connect 5\r"
expect "*#"
send -- "address-family ipv4 unicast\r"
expect "*#"
send -- "no network 192.168.0.0/24\r"
expect "*#"
send -- "network 192.168.0.0/24\r"
expect "*#"
send -- "no network 192.168.1.0/24\r"
expect "*#"
send -- "network 192.168.1.0/24\r"
expect "*#"
send -- "no network 192.168.2.0/24\r"
expect "*#"
send -- "network 192.168.2.0/24\r"
expect "*#"
send -- "no network 192.168.3.0/24\r"
expect "*#"
send -- "network 192.168.3.0/24\r"
expect "*#"
send -- "no network 192.168.7.0/24\r"
expect "*#"
send -- "network 192.168.7.0/24\r"
expect "*#"
send -- "no network 192.168.8.0/24\r"
expect "*#"
send -- "network 192.168.8.0/24\r"
expect "*#"
send -- "no neighbor 192.168.201.2 route-map testmap-in in\r"
expect "*#"
send -- "neighbor 192.168.201.2 route-map testmap-in in\r"
expect "*#"
send -- "no neighbor 192.168.201.2 route-map testmap-out out\r"
expect "*#"
send -- "neighbor 192.168.201.2 route-map testmap-out out\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "no exit-address-family\r"
expect "*#"
send -- "exit-address-family\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "no route-map testmap-in permit 999\r"
expect "*#"
send -- "route-map testmap-in permit 999\r"
expect "*#"
send -- "no route-map testmap-out permit 999\r"
expect "*#"
send -- "route-map testmap-out permit 999\r"
expect "*#"
send -- "no line vty\r"
expect "*#"
send -- "line vty\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "exit\r"
expect eof
