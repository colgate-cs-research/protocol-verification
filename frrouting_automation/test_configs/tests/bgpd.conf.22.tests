#!/usr/bin/expect -f
set timeout -1
log_file tests.log
spawn vtysh
expect "*#"
send -- "configure terminal\r"
expect "*#"
send -- "no ! Zebra configuration saved from vty\r"
expect "*#"
send -- "! Zebra configuration saved from vty\r"
expect "*#"
send -- "no !   2021/03/30 10:47:53\r"
expect "*#"
send -- "!   2021/03/30 10:47:53\r"
expect "*#"
send -- "no frr version 7.7-dev_git\r"
expect "*#"
send -- "frr version 7.7-dev_git\r"
expect "*#"
send -- "no frr defaults traditional\r"
expect "*#"
send -- "frr defaults traditional\r"
expect "*#"
send -- "no hostname 2edb16f23d3a\r"
expect "*#"
send -- "hostname 2edb16f23d3a\r"
expect "*#"
send -- "no debug bgp neighbor-events\r"
expect "*#"
send -- "debug bgp neighbor-events\r"
expect "*#"
send -- "no debug bgp updates in\r"
expect "*#"
send -- "debug bgp updates in\r"
expect "*#"
send -- "no debug bgp updates out\r"
expect "*#"
send -- "debug bgp updates out\r"
expect "*#"
send -- "no debug bgp zebra\r"
expect "*#"
send -- "debug bgp zebra\r"
expect "*#"
send -- "router bgp 65000\r"
expect "*#"
send -- "no bgp router-id 192.168.100.41\r"
expect "*#"
send -- "bgp router-id 192.168.100.41\r"
expect "*#"
send -- "no bgp log-neighbor-changes\r"
expect "*#"
send -- "bgp log-neighbor-changes\r"
expect "*#"
send -- "bgp default ipv4-unicast\r"
expect "*#"
send -- "no bgp default ipv4-unicast\r"
expect "*#"
send -- "no neighbor 192.168.100.21 peer-group\r"
expect "*#"
send -- "neighbor 192.168.100.21 peer-group\r"
expect "*#"
send -- "no neighbor 192.168.100.21 remote-as 65000\r"
expect "*#"
send -- "neighbor 192.168.100.21 remote-as 65000\r"
expect "*#"
send -- "no neighbor 192.168.100.21 capability extended-nexthop\r"
expect "*#"
send -- "neighbor 192.168.100.21 capability extended-nexthop\r"
expect "*#"
send -- "address-family l2vpn evpn\r"
expect "*#"
send -- "no neighbor 192.168.100.21 activate\r"
expect "*#"
send -- "neighbor 192.168.100.21 activate\r"
expect "*#"
send -- "no advertise-all-vni\r"
expect "*#"
send -- "advertise-all-vni\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "no exit-address-family\r"
expect "*#"
send -- "exit-address-family\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "router bgp 65000 vrf r2-vrf-101\r"
expect "*#"
send -- "no bgp router-id 192.168.101.41\r"
expect "*#"
send -- "bgp router-id 192.168.101.41\r"
expect "*#"
send -- "no bgp log-neighbor-changes\r"
expect "*#"
send -- "bgp log-neighbor-changes\r"
expect "*#"
send -- "bgp network import-check\r"
expect "*#"
send -- "no bgp network import-check\r"
expect "*#"
send -- "address-family ipv4 unicast\r"
expect "*#"
send -- "no network 192.168.101.41/32\r"
expect "*#"
send -- "network 192.168.101.41/32\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "no exit-address-family\r"
expect "*#"
send -- "exit-address-family\r"
expect "*#"
send -- "address-family l2vpn evpn\r"
expect "*#"
send -- "no advertise ipv4 unicast\r"
expect "*#"
send -- "advertise ipv4 unicast\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "no exit-address-family\r"
expect "*#"
send -- "exit-address-family\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "no line vty\r"
expect "*#"
send -- "line vty\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "exit\r"
expect eof
