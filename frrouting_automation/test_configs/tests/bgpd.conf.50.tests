#!/usr/bin/expect -f
set timeout -1
log_file tests.log
spawn vtysh
expect "*#"
send -- "configure terminal\r"
expect "*#"
send -- "no ! Zebra configuration saved from vty\r"
expect "*#"
send -- "! Zebra configuration saved from vty\r"
expect "*#"
send -- "no !   2021/03/30 10:54:30\r"
expect "*#"
send -- "!   2021/03/30 10:54:30\r"
expect "*#"
send -- "no frr version 7.7-dev_git\r"
expect "*#"
send -- "frr version 7.7-dev_git\r"
expect "*#"
send -- "no frr defaults traditional\r"
expect "*#"
send -- "frr defaults traditional\r"
expect "*#"
send -- "no hostname r5\r"
expect "*#"
send -- "hostname r5\r"
expect "*#"
send -- "router bgp 65302\r"
expect "*#"
send -- "no bgp router-id 11.1.5.1\r"
expect "*#"
send -- "bgp router-id 11.1.5.1\r"
expect "*#"
send -- "bgp ebgp-requires-policy\r"
expect "*#"
send -- "no bgp ebgp-requires-policy\r"
expect "*#"
send -- "no bgp bestpath as-path multipath-relax\r"
expect "*#"
send -- "bgp bestpath as-path multipath-relax\r"
expect "*#"
send -- "no neighbor 11.1.2.5 remote-as external\r"
expect "*#"
send -- "neighbor 11.1.2.5 remote-as external\r"
expect "*#"
send -- "no neighbor 11.1.2.5 timers 3 10\r"
expect "*#"
send -- "neighbor 11.1.2.5 timers 3 10\r"
expect "*#"
send -- "no neighbor 11.1.5.2 remote-as external\r"
expect "*#"
send -- "neighbor 11.1.5.2 remote-as external\r"
expect "*#"
send -- "no neighbor 11.1.5.2 timers 3 10\r"
expect "*#"
send -- "neighbor 11.1.5.2 timers 3 10\r"
expect "*#"
send -- "address-family ipv4 unicast\r"
expect "*#"
send -- "no neighbor 11.1.2.5 route-map anycast_ip out\r"
expect "*#"
send -- "neighbor 11.1.2.5 route-map anycast_ip out\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "no exit-address-family\r"
expect "*#"
send -- "exit-address-family\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "no ip prefix-list anycast_ip seq 10 permit 198.10.1.0/24 le 32\r"
expect "*#"
send -- "ip prefix-list anycast_ip seq 10 permit 198.10.1.0/24 le 32\r"
expect "*#"
send -- "route-map anycast_ip permit 10\r"
expect "*#"
send -- "no set extcommunity bandwidth num-multipaths\r"
expect "*#"
send -- "set extcommunity bandwidth num-multipaths\r"
expect "*#"
send -- "no match ip address prefix-list anycast_ip\r"
expect "*#"
send -- "match ip address prefix-list anycast_ip\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "no route-map anycast_ip permit 20\r"
expect "*#"
send -- "route-map anycast_ip permit 20\r"
expect "*#"
send -- "no line vty\r"
expect "*#"
send -- "line vty\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "exit\r"
expect eof
