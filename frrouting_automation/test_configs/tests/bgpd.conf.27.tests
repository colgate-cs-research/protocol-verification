#!/usr/bin/expect -f
set timeout -1
log_file tests.log
spawn vtysh
expect "*#"
send -- "configure terminal\r"
expect "*#"
send -- "no ! Zebra configuration saved from vty\r"
expect "*#"
send -- "! Zebra configuration saved from vty\r"
expect "*#"
send -- "no !   2021/03/30 10:48:52\r"
expect "*#"
send -- "!   2021/03/30 10:48:52\r"
expect "*#"
send -- "no frr version 7.7-dev_git\r"
expect "*#"
send -- "frr version 7.7-dev_git\r"
expect "*#"
send -- "no frr defaults traditional\r"
expect "*#"
send -- "frr defaults traditional\r"
expect "*#"
send -- "no hostname r1\r"
expect "*#"
send -- "hostname r1\r"
expect "*#"
send -- "no password zebra\r"
expect "*#"
send -- "password zebra\r"
expect "*#"
send -- "no log stdout\r"
expect "*#"
send -- "log stdout\r"
expect "*#"
send -- "router bgp 100\r"
expect "*#"
send -- "no bgp router-id 10.0.1.1\r"
expect "*#"
send -- "bgp router-id 10.0.1.1\r"
expect "*#"
send -- "no neighbor 10.0.1.101 remote-as 100\r"
expect "*#"
send -- "neighbor 10.0.1.101 remote-as 100\r"
expect "*#"
send -- "no neighbor 10.0.1.101 update-source 10.0.1.1\r"
expect "*#"
send -- "neighbor 10.0.1.101 update-source 10.0.1.1\r"
expect "*#"
send -- "no neighbor 10.0.1.101 timers 3 10\r"
expect "*#"
send -- "neighbor 10.0.1.101 timers 3 10\r"
expect "*#"
send -- "address-family ipv4 flowspec\r"
expect "*#"
send -- "no neighbor 10.0.1.101 activate\r"
expect "*#"
send -- "neighbor 10.0.1.101 activate\r"
expect "*#"
send -- "no local-install r1-eth0\r"
expect "*#"
send -- "local-install r1-eth0\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "no exit-address-family\r"
expect "*#"
send -- "exit-address-family\r"
expect "*#"
send -- "address-family ipv6 flowspec\r"
expect "*#"
send -- "no neighbor 10.0.1.101 activate\r"
expect "*#"
send -- "neighbor 10.0.1.101 activate\r"
expect "*#"
send -- "no local-install r1-eth0\r"
expect "*#"
send -- "local-install r1-eth0\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "no exit-address-family\r"
expect "*#"
send -- "exit-address-family\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "no line vty\r"
expect "*#"
send -- "line vty\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "exit\r"
expect "*#"
send -- "exit\r"
expect eof
