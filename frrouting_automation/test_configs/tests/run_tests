#!/usr/bin/expect -f
log_file errors.log
spawn vtysh
expect "router*"
send -- "configure terminal\r"
expect "router*"
send -- "no ! Zebra configuration saved from vty\r"
expect "router*"
send -- "! Zebra configuration saved from vty\r"
expect "router*"
send -- "no !   2021/03/04 11:13:06\r"
expect "router*"
send -- "!   2021/03/04 11:13:06\r"
expect "router*"
send -- "no frr version 7.7-dev_git\r"
expect "router*"
send -- "frr version 7.7-dev_git\r"
expect "router*"
send -- "no frr defaults traditional\r"
expect "router*"
send -- "frr defaults traditional\r"
expect "router*"
send -- "no hostname router2\r"
expect "router*"
send -- "hostname router2\r"
expect "router*"
send -- "no password zebra\r"
expect "router*"
send -- "password zebra\r"
expect "router*"
send -- "no enable password zebra\r"
expect "router*"
send -- "enable password zebra\r"
expect "router*"
send -- "no log file /tmp/bgp.log\r"
expect "router*"
send -- "log file /tmp/bgp.log\r"
expect "router*"
send -- "no debug bgp keepalives\r"
expect "router*"
send -- "debug bgp keepalives\r"
expect "router*"
send -- "no debug bgp neighbor-events\r"
expect "router*"
send -- "debug bgp neighbor-events\r"
expect "router*"
send -- "no debug bgp update-groups\r"
expect "router*"
send -- "debug bgp update-groups\r"
expect "router*"
send -- "no debug bgp updates in\r"
expect "router*"
send -- "debug bgp updates in\r"
expect "router*"
send -- "no debug bgp updates out\r"
expect "router*"
send -- "debug bgp updates out\r"
expect "router*"
send -- "no debug bgp zebra\r"
expect "router*"
send -- "debug bgp zebra\r"
expect "router*"
send -- "router bgp 2\r"
expect "router*"
send -- "bgp router-id 10.10.0.3\r"
expect "router*"
send -- "bgp log-neighbor-changes\r"
expect "router*"
send -- "no bgp ebgp-requires-policy\r"
expect "router*"
send -- "neighbor TEST peer-group\r"
expect "router*"
send -- "neighbor TEST description test_group\r"
expect "router*"
send -- "neighbor TEST update-source 192.168.10.10\r"
expect "router*"
send -- "neighbor 10.10.0.2 remote-as 1\r"
expect "router*"
send -- "neighbor 10.10.0.11 remote-as 3\r"
expect "router*"
send -- "bgp listen range 192.168.10.0/24 peer-group TEST\r"
expect "router*"
send -- "address-family ipv4 unicast\r"
expect "router*"
send -- "redistribute connected\r"
expect "router*"
send -- "neighbor 10.10.0.2 next-hop-self\r"
expect "router*"
send -- "neighbor 10.10.0.11 next-hop-self\r"
expect "router*"
send -- "no exit-address-family\r"
expect "router*"
send -- "exit-address-family\r"
expect "router*"
send -- "no line vty\r"
expect "router*"
send -- "line vty\r"
expect "router*"
expect eof
